(function(t){function e(e){for(var a,o,s=e[0],l=e[1],c=e[2],d=0,g=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&g.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(g.length)g.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],a=!0,s=1;s<r.length;s++){var l=r[s];0!==i[l]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=r[0]))}return t}var a={},i={app:0},n=[];function o(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0322":function(t,e,r){t.exports=r.p+"img/bylogo.4cdae645.png"},2395:function(t,e,r){},3664:function(t,e,r){},"3dcb":function(t,e,r){"use strict";var a=r("3664"),i=r.n(a);i.a},"4fde":function(t,e,r){"use strict";var a=r("7ce0"),i=r.n(a);i.a},5699:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-content",[r("router-view")],1)},n=[],o={name:"App",components:{},data:function(){return{}}},s=o,l=(r("7c55"),r("2877")),c=r("6544"),u=r.n(c),d=r("a75b"),g=Object(l["a"])(s,i,n,!1,null,null,null),m=g.exports;u()(g,{VContent:d["a"]});var p=r("8c4f"),v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("v-snackbar",{attrs:{top:!0},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.errorMsg)+" ")]),t._m(0),r("div",{staticClass:"content"},[r("div",{staticClass:"login_block"},[r("div",{staticClass:"new-loginFunc"},[t.isShowEWM_login?r("div",{staticClass:"new-loginFuncApp qrcode-163-icon",attrs:{id:"lbApp",title:"点击二维码登陆"},on:{click:t.queryEWM}}):r("div",{staticClass:"new-loginFuncNormal account-163-icon",attrs:{id:"lbNormal",title:"账号密码登陆"},on:{click:t.currentUserLogin}})]),r("h2",{staticClass:"loginbox-title"},[t._v(t._s(t.isRegistry?t.isShowEWM_login?"账号密码登陆":"二维码登陆":"注册"))]),t.isShowEWM_login?r("div",[t.isRegistry?r("v-form",{ref:"form"},[r("v-text-field",{attrs:{label:"手机号",required:""},model:{value:t.login_form.phone,callback:function(e){t.$set(t.login_form,"phone",e)},expression:"login_form.phone"}}),r("v-text-field",{attrs:{label:"密码",type:"password",required:""},model:{value:t.login_form.password,callback:function(e){t.$set(t.login_form,"password",e)},expression:"login_form.password"}}),r("div",{staticStyle:{textAlign:"center",margin:"10px 0"}},[r("v-btn",{staticStyle:{background:"#2196F3"},attrs:{loading:t.loadingStatus,block:"","x-large":"",color:"red",dark:""},on:{click:t.loginClick}},[t._v("登录")])],1),r("a",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(e){t.isRegistry=!t.isRegistry}}},[t._v("点击注册")])],1):r("v-form",{ref:"form",model:{value:t.registryModel,callback:function(e){t.registryModel=e},expression:"registryModel"}},[r("v-text-field",{attrs:{label:"手机号",required:""},model:{value:t.registryForm.phone,callback:function(e){t.$set(t.registryForm,"phone",e)},expression:"registryForm.phone"}}),r("v-text-field",{attrs:{label:"密码",type:"password",required:""},model:{value:t.registryForm.password,callback:function(e){t.$set(t.registryForm,"password",e)},expression:"registryForm.password"}}),r("v-text-field",{attrs:{label:"纳税人识别号",required:""},model:{value:t.registryForm.sbh,callback:function(e){t.$set(t.registryForm,"sbh",e)},expression:"registryForm.sbh"}}),r("v-text-field",{attrs:{label:"证书序列号",required:""},model:{value:t.registryForm.seriaNum,callback:function(e){t.$set(t.registryForm,"seriaNum",e)},expression:"registryForm.seriaNum"}}),r("div",{staticStyle:{textAlign:"center"}},[r("v-btn",{staticStyle:{background:"#2196F3"},attrs:{loading:t.loadingStatus,block:"","x-large":"",color:"red",dark:""},on:{click:t.registryClick}},[t._v("注册")])],1),r("a",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(e){t.isRegistry=!t.isRegistry}}},[t._v("点击登陆")])],1)],1):r("div",{staticStyle:{width:"270px",margin:"0 auto",position:"relative"}},[r("img",{staticClass:"ewmImg",attrs:{src:t.img64Str,alt:""}}),0==t.timer?r("div",{staticClass:"ewm_dialog",on:{click:t.queryEWM}},[t._v("重新获取")]):t._e(),r("p",{staticStyle:{textAlign:"center"}},[t._v(t._s(61!=t.timer?"二维码有效时间："+t.timer+"秒":""))])])])])],1)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("img",{staticClass:"header_logo",attrs:{src:r("0322"),alt:""}}),a("p",{staticClass:"header_text"},[t._v("手机扫码登陆演示")])])}],h=(r("13d5"),r("d3b7"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("bc3a")),b=r.n(h),y={dev:"http://192.168.1.126:8080",pro:""},_="USER_INFO",k=y.pro,w={data:function(){return{loadingStatus:!1,snackbar:!1,isRegistry:!0,isShowEWM_login:!0,url:k+"/MobileDemo/mobile/server.do",authenticationResultUrl:k+"/MobileDemo/mobile/authenticationResult.do",img64Str:"",timer:61,nsrsbhStr:"",timer2:"",interTimer:"",registryModel:!0,registryForm:{},loginUrl:k+"/MobileDemo/user/login.do",registryUrl:k+"/MobileDemo/user/register.do",login_form:{},errorMsg:""}},methods:{registryClick:function(){var t=this,e={phone:this.registryForm.phone,password:this.registryForm.password,sbh:this.registryForm.sbh,serialNum:this.registryForm.seriaNum};this.loadingStatus=!0,b()({method:"post",url:this.registryUrl,data:e}).then((function(e){t.loadingStatus=!1,t.snackbar=!0,0!=e.data.code?t.errorMsg=e.data.msg:t.errorMsg="注册成功"})).catch((function(e){t.loadingStatus=!1,t.snackbar=!0,t.errorMsg="访问服务器失败"}))},loginClick:function(){var t=this;this.loadingStatus=!0;var e={phone:this.login_form.phone,password:this.login_form.password};b()({method:"post",url:this.loginUrl,data:e}).then((function(e){t.loadingStatus=!1,0!=e.data.code?(t.snackbar=!0,t.errorMsg=e.data.msg):(console.log("data",e),window.sessionStorage.setItem(_,"data"),t.toHome())})).catch((function(e){t.loadingStatus=!1,t.snackbar=!0,t.errorMsg="访问服务器失败"}))},toHome:function(){this.$router.push("home")},currentUserLogin:function(){this.isShowEWM_login=!0,clearInterval(this.interTimer),clearInterval(this.timer2),this.nsrsbhStr=""},queryEWM:function(){var t=this;this.isShowEWM_login=!1,b()({responseType:"arraybuffer",method:"get",url:this.url,params:{signType:0}}).then((function(e){console.log("data",e),t.img64Str="data:image/png;base64,"+btoa(new Uint8Array(e.data).reduce((function(t,e){return t+String.fromCharCode(e)}),"")),t.timer=60,t.interTimer=setInterval((function(){if(0==t.timer)return clearInterval(t.interTimer),void clearInterval(t.timer2);t.timer-=1}),1e3),t.timer2=setInterval((function(){b()({method:"post",url:t.authenticationResultUrl,dataType:"json",data:{},params:{signType:0}}).then((function(e){console.log("data",e),"error"!=e.data.msg&&(window.sessionStorage.setItem(_,e.data.certSn),t.toHome(),clearInterval(t.timer2))}))}),1e3)}))}}},x=w,S=(r("4fde"),r("8336")),I=r("4bd4"),V=r("2db4"),C=r("8654"),M=Object(l["a"])(x,v,f,!1,null,null,null),F=M.exports;u()(M,{VBtn:S["a"],VForm:I["a"],VSnackbar:V["a"],VTextField:C["a"]});var T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{light:"",id:"inspire"}},[r("v-navigation-drawer",{attrs:{light:"",app:"",clipped:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",{attrs:{dense:""}},[r("v-list-item",{attrs:{link:""},on:{click:function(e){t.status=!0}}},[r("v-list-item-action",[r("v-icon",[t._v("mdi-view-dashboard")])],1),r("v-list-item-content",[r("v-list-item-title",[t._v("首页")])],1)],1),r("v-list-item",{attrs:{link:""},on:{click:function(e){t.status=!1}}},[r("v-list-item-action",[r("v-icon",[t._v("mdi-view-dashboard")])],1),r("v-list-item-content",[r("v-list-item-title",[t._v("扫码签名")])],1)],1)],1)],1),r("v-app-bar",{attrs:{light:"",app:"","clipped-left":""}},[r("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),r("v-toolbar-title",[t._v("协同签名功能演示")]),r("v-toolbar-title",{staticStyle:{position:"absolute",right:"33px",cursor:"pointer"},on:{click:t.loginOut}},[t._v("退出登录")])],1),r("v-main",{staticStyle:{padding:"0"}},[r("v-container",{staticStyle:{padding:"0"}},[t.status?r("DeskTop"):r("Smqm")],1)],1),r("v-footer",{attrs:{app:"",light:""}},[r("span",[t._v("© "+t._s((new Date).getFullYear()))])])],1)},R=[],O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.dialog_loading,callback:function(e){t.dialog_loading=e},expression:"dialog_loading"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[t._v(" 正在获取二维码... "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),r("v-card",{staticClass:"mx-auto",staticStyle:{padding:"20px",marginTop:"50px"},attrs:{light:"","max-width":"500",outlined:""}},[r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-text-field",{attrs:{rules:t.nameRules,label:"请输入需要签名的数据",required:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signClick(e)}},model:{value:t.iptVal,callback:function(e){t.iptVal=e},expression:"iptVal"}}),r("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.signClick}},[t._v(" 点击签名 ")])],1)],1),r("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",{attrs:{light:""}},[r("v-card-title",{staticClass:"headline grey lighten-2"},[t._v(" "+t._s(t.signResult?"签名成功":"请扫描下方二维码")+" ")]),r("v-card-text",[t.signResult?r("v-textarea",{staticStyle:{marginTop:"53px"},attrs:{outlined:"",name:"input-7-4",label:"签名结果",value:t.signResult,readonly:!0}}):r("div",{staticStyle:{width:"270px",margin:"21px auto 0",position:"relative"}},[r("img",{staticClass:"ewmImg",attrs:{src:t.img64Str,alt:""}}),0==t.timer?r("div",{staticClass:"ewm_dialog",on:{click:t.signClick}},[t._v("重新获取")]):t._e(),r("p",{staticStyle:{textAlign:"center"}},[t._v(t._s(61!=t.timer?"二维码有效时间："+t.timer+"秒":""))])])],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:""},on:{click:t.closeModal}},[t._v(" 关闭 ")])],1)],1)],1)],1)},E=[],j={name:"Smqm",methods:{closeModal:function(){this.dialog=!1,clearInterval(this.Intertimer),clearInterval(this.Intertimer2)},signClick:function(){var t=this,e=this.$refs.form.validate();e&&(this.signResult="",this.dialog_loading=!0,b()({method:"post",url:this.quueryUserIdUrl,data:{}}).then((function(e){b()({responseType:"arraybuffer",method:"get",url:t.url,params:{signType:1,filePath:t.iptVal,userId:e.data.userId}}).then((function(e){t.img64Str="data:image/png;base64,"+btoa(new Uint8Array(e.data).reduce((function(t,e){return t+String.fromCharCode(e)}),"")),t.dialog_loading=!1,t.dialog=!0,t.timer=60,t.Intertimer=setInterval((function(){if(0==t.timer)return clearInterval(t.Intertimer),void clearInterval(t.Intertimer2);t.timer-=1}),1e3),t.Intertimer2=setInterval((function(){b()({method:"post",url:t.authenticationResultUrl,dataType:"json",data:{},params:{signType:1}}).then((function(e){"success"==e.data.msg&&(clearInterval(t.Intertimer2),clearInterval(t.Intertimer),t.signResult=e.data.certsnResult)}))}),1e3)}))})))}},data:function(){return{url:k+"/MobileDemo/mobile/server.do",dialog_loading:!1,iptVal:"",dialog:!1,img64Str:"",timer:61,Intertimer:"",nameRules:[function(t){return!!t||"数据不能为空"}],Intertimer2:"",authenticationResultUrl:k+"/MobileDemo/mobile/authenticationResult.do",quueryUserIdUrl:k+"/MobileDemo/mobile/getNum.do",signResult:""}}},U=j,$=(r("d4fe"),r("b0af")),q=r("99d9"),A=r("169a"),D=r("ce7e"),N=r("8e36"),P=r("2fa4"),L=r("a844"),W=Object(l["a"])(U,O,E,!1,null,"724e4e20",null),B=W.exports;u()(W,{VBtn:S["a"],VCard:$["a"],VCardActions:q["a"],VCardText:q["b"],VCardTitle:q["c"],VDialog:A["a"],VDivider:D["a"],VForm:I["a"],VProgressLinear:N["a"],VSpacer:P["a"],VTextField:C["a"],VTextarea:L["a"]});var H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-snackbar",{attrs:{light:"",top:!0},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.errorMsg)+" ")]),t.loading?r("div",{staticClass:"loading_wrap"},[r("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}}),r("div",{style:{margin:"10px 0",color:"#000"}},[t._v("获取用户信息中...")])],1):r("v-container",{attrs:{fluid:""}},[r("v-row",[r("v-col",{attrs:{cols:"8"}},[r("v-text-field",{attrs:{light:"",shaped:"",outlined:"",label:"手机号",value:t.userInfo.phone,readonly:""}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"8"}},[r("v-text-field",{attrs:{light:"",shaped:"",outlined:"",readonly:"",label:"统一社会信号代码",value:t.userInfo.user_id}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"8"}},[r("v-text-field",{attrs:{light:"",shaped:"",outlined:"",readonly:"",label:"证书序列号",value:t.userInfo.cert_sn}})],1)],1)],1)],1)},z=[],J=(r("96cf"),r("1da1")),Y=r("4328"),G=r.n(Y),K={data:function(){return{userInfo:{},errorMsg:"",snackbar:!1,loading:!0,info_url:"/MobileDemo/user/get/userInfo.do"}},mounted:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=window.sessionStorage.getItem(_),e.prev=1,e.next=4,b.a.post(k+t.info_url,G.a.stringify({certSn:r}));case 4:a=e.sent,0!=a.data.code?(t.snackbar=!0,t.errorMsg=a.data.msg):t.userInfo=a.data.data,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),t.snackbar=!0,t.errorMsg="访问服务器失败";case 12:t.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))()},methods:{}},Q=K,X=(r("a5f3"),r("62ad")),Z=r("a523"),tt=r("490a"),et=r("0fd9"),rt=Object(l["a"])(Q,H,z,!1,null,null,null),at=rt.exports;u()(rt,{VCol:X["a"],VContainer:Z["a"],VProgressCircular:tt["a"],VRow:et["a"],VSnackbar:V["a"],VTextField:C["a"]});var it={props:{source:String},data:function(){return{drawer:null,status:!0}},created:function(){this.$vuetify.theme.dark=!0},beforeRouteEnter:function(t,e,r){var a=sessionStorage.getItem(_);a?r():r("/login")},methods:{changMenu:function(t){console.log(t)},loginOut:function(){this.$router.push("login"),window.sessionStorage.clear()}},components:{Smqm:B,DeskTop:at}},nt=it,ot=(r("3dcb"),r("7496")),st=r("40dc"),lt=r("5bc1"),ct=r("553a"),ut=r("132d"),dt=r("8860"),gt=r("da13"),mt=r("1800"),pt=r("5d23"),vt=r("f6c4"),ft=r("f774"),ht=r("2a7f"),bt=Object(l["a"])(nt,T,R,!1,null,"5b486173",null),yt=bt.exports;u()(bt,{VApp:ot["a"],VAppBar:st["a"],VAppBarNavIcon:lt["a"],VContainer:Z["a"],VFooter:ct["a"],VIcon:ut["a"],VList:dt["a"],VListItem:gt["a"],VListItemAction:mt["a"],VListItemContent:pt["a"],VListItemTitle:pt["b"],VMain:vt["a"],VNavigationDrawer:ft["a"],VToolbarTitle:ht["a"]}),a["a"].use(p["a"]);var _t=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:F},{path:"/home",name:"Home",component:yt}],kt=new p["a"]({routes:_t}),wt=kt,xt=r("2f62");a["a"].use(xt["a"]);var St=new xt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),It=r("f309");a["a"].use(It["a"]);var Vt=new It["a"]({});a["a"].config.productionTip=!1,new a["a"]({router:wt,store:St,vuetify:Vt,render:function(t){return t(m)}}).$mount("#app")},"7c55":function(t,e,r){"use strict";var a=r("2395"),i=r.n(a);i.a},"7ce0":function(t,e,r){},a5f3:function(t,e,r){"use strict";var a=r("5699"),i=r.n(a);i.a},d4fe:function(t,e,r){"use strict";var a=r("f713"),i=r.n(a);i.a},f713:function(t,e,r){}});
//# sourceMappingURL=app.f89cd503.js.map